# Report.
###### By Marije Dekker, 10785949
###### Programmeerproject
#### Description.
##### With this project you can see the distribution of drug use, with six different drug groups, over Europe, with a choroplethmap. Furthermore you can see the ratios of the different drug groups in one country with a donutchart. Beside that you can see, with a scatterplot, if there is a correlation between an assumed cause of drug use and the use of one of the druggroups.
![screenshot](doc/screenshot1.jpg)
![screenshot](doc/screenshot2.jpg)
#### Design.
##### First there is one HTML-file (drugs.html). In this file are a few javascript files loaded. In the head are D3, bootstrap, jQuery and the css file (drugs.css) loaded.
##### For the choroplethmap are two javascript files. One for the map itself, this is datamaps (worldmap.js), and one with the function to fill the colors per drug in the map, the variables and different tooltips for this map (drugmap.js). When a drug from the menu above the map is chosen, the function to fill the colors, updateMap from drugmap.js, is called. This function calls the right json file and iterates over it and assigns the right fillcolor per country. 
##### Under the map are a few lines of text, from the html-file. Here is explained what the different drug groups are, with links to a site with information about the drugs. Furthermore there is explained where the data about the drugs comes from, also with links to the source. And there is a list with some interesting noticable things about the map, which can be clicked on, so they can be seen immidiately. This is done with the jQuery onclick function where the updateMap with the right jsonfile is called.
##### Next to the map is the donutchart. In piechart.js is the function which makes this chart and a few variables. On the load of the page this function is called with the country Holland. When there is clicked on a country in the map or on a dot in the scatterplot this function is called with the corresponding country. Before the function all the different drug-jsons are put together and when the function is called, it makes a new array from it, to match the data with the country. On top of the donutchart are a few noticable countries mentioned. When there is clicked on one of these words this function is called with an onclick function in the html. The donut has got a tooltip which shows the percentage of the drug users of the drug which is hovered of the total drug users of that country.
##### Right under the map there is a scatterplot. The function which makes the scatterplotis called from scatterplot.js. On the load of the page the scatterplot is called with two jsons, one for the influence and one for the drugs. When a drug or influence is chosen the scatterplot function is called and the scatterplot updates, so you can see if the two variables correlate. Also is there a tooltip. When you hover over a dot it shows the corresponding country and influence and drug values. 
##### The data for the drugs and influences are stored in json files. The data about the drugs are stored per drugs in a json file, same with the data about the influences.
#### Challenges.
##### At first the plan was to make a choroplethmap, a piechart and a barchart, with the focus on the causes/influences on drug use. But, because the map and the piechart came on top of the page, it looked like the focus was on the distribution of drug use across Europe. Therefore the title was changed to be more general: Drug use in Europe. 
##### The piechart was changed to a donutchart because it gave the page more room and made it easier to look at, because you can put text in the center of a donutchart. First the values of the donutchart where placed on it as labels, but because the values are in percentages, it became confusing. Therefore it was put in a tooltip and the values where converted to the relative numbers instead of the absolute numbers. 
##### After the barchart about the influences on drug use was made, it didn't make much clear. You couldn't pick any useful information out this barchart. Because of that it was made into a grouped barchart, with for each country the drug and influence value. But this also wasn't very usefull to see a correlation between those two variables. That was the reason why there is a scatterplot. This is the most usefull visualization to see if there is a correlation between two variables, and it works.
#### Decisions.
#####